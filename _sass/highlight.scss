pre {
  background-color: var(--base3);
}
code {
  background-color: var(--base3);
  color: var(--base01);
}

div.highlight > pre.highlight {
  // Solarized color schema
  background-color: var(--base3) !important;
  color: var(--base00) !important;

  > code {
    .w {
      color: var(--base01);
    }
    .err {
      color: var(--base03);
      background-color: $red;
    }
    .c, .cd, .cm, .c1, .cs {
      color: var(--base1);
    }
    .cp {
      color: $yellow;
    }
    .nt {
      color: $yellow;
    }
    .o, .ow {
      color: var(--base1);
    }
    .p, .pi {
      color: var(--base1);
    }
    .gi {
      color: $green;
    }
    .gd {
      color: $red;
    }
    .gh {
      color: $blue;
      background-color: var(--base03);
      font-weight: bold;
    }
    .k, .kn, .kr, .kv {
      color: $violet;
    }
    .kp {
      color: $blue;
    }
    .kc {
      color: $orange;
    }
    .kt {
      color: $orange;
    }
    .kd {
      color: $orange;
    }
    .s, .sb, .sc, .sd, .s2, .sh, .sx, .s1 {
      color: $green;
    }
    .sr {
      color: $cyan;
    }
    .si {
      color: $magenta;
    }
    .se {
      color: $magenta;
    }
    .nn {
      color: $yellow;
    }
    .nc {
      color: $yellow;
    }
    .no {
      color: $yellow;
    }
    .nf {
      color: $cyan;
    }
    .na {
      color: $blue;
    }
    .m, .mf, .mh, .mi, .il, .mo, .mb, .mx {
      color: $green;
    }
    .ss {
      color: $green;
    }
  }
}

div.highlighter-rouge {
  --padding-y: 0.3em;
  --padding-x: 1ex;

  > div.highlight {
    background-color: transparent;

    > pre.highlight {
      padding: var(--padding-y) var(--padding-x);

      overflow: auto;

      > code {
        padding: 0;
        margin: 0;

        > span.line {
          padding-right: var(--padding-x);
        }
      }
    }
  }
  &:not(.language-console):not(.language-terminal):not(.language-shell_session):not(.language-shell-session) > div.highlight > pre.highlight {
    counter-reset: line-number;

    padding: 0;
    overscroll-behavior: none;

    > code > span.line {
      counter-increment: line-number;

      &::before {
        content: counter(line-number);

        text-align: right;

        position: sticky;
        inset: 0;

        display: inline-block;
        box-sizing: border-box;
        width: 5ex;
        padding-right: 1ex;

        background-color: var(--base2);
        color: var(--base1);

        margin-right: var(--padding-x);
      }

      &:first-child::before {
        padding-top: var(--padding-y);
      }

      &:last-child::before {
        padding-bottom: var(--padding-y);
      }
    }
  }
}
